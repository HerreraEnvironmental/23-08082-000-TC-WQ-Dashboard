## Suggestions for directory layout

Thurston_repository/
├─ functions/                # all of our helper functions for the app
├─ data-raw/                 # NEVER used at runtime
│  ├─ WQP_r_script.R         # pulls external data
│  └─ data_prep.R            # transforms data for input to app
├─ outputs/                  # versioned, *read-only* snapshots (the RDS files)
│  ├─ current/               # latest data produced by WQP_r_script.R
│  └─ archive/               # do we need older data or should we continue to overwrite
├─ config/                   # YAMLs for env-specific settings, define inputs/outputs and stop hardcoding paths
│  └─ config.yaml
├─ scripts/
│  └─ update_data.R          # Essentially runs scripts within data raw
│  └─ install_deps.R         # Update packages, might replace package_check_script.R
│  └─ deploy_app.R           # Runs everything in this directory
├─ archive/                  # Stores old and outdated scripts
│  └─ data_prep_OG.R         # Old data prep for backup
├─ ui.R
├─ server.R
├─ www          
├─ default.yaml              # Simple config for repo org
├─ deps.yaml                 # yaml for package depenencies
├─ .gitignore
├─ .Rproj 
└─ README.md

# Low hanging fruit for robustness/tidiness

## For update_data.R, consider GHA if it needs to be more automated. Do we need snapshots?
## Consider switching to parquet; faster than RDS and interchangeable with Python
## Simple precommit hook to standardize lintr/styler

# More ambitious guardrails for data quality: 

## Add assertions with {pointblank} instead of :
- required columns present
- dtypes / ranges / negative concentrations (use GSI as starting point, or can be simpler)
- Snapshot comparison if we're doing snapshots, ie row counts not implausibly low/high vs last snapshot
- validate(need(dir.exists("data/current"), "No published dataset found. Please run update_data.R"))
 

